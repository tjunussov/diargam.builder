(function(){CNB.TR={};CNB.initNavOverlay=function(){try{var a=$("header-sec");var d=a.getElements(".nav-sec li");var c=a.getElements(".overlay-pop");var b=new CNB.Pop(d,c,{offset:{x:0,y:-2}}).load();var f=$("member-tools");var d=f.getElements(".my-profile");var c=f.getElements(".overlay-pop");var b=new CNB.Pop(d,c,{offset:{x:0,y:-2}}).load()}catch(e){}};CNB.TR.LandingPad=new Class({initialize:function(){this.state=Cookie.read("landing-pad");this.container=$("landing");this.btn=this.container.getElements(".landing-collapse");this.content=this.container.getElements(".landing-pad")},load:function(){if(this.state=="collapsed"){this.hide()}else{this.btn.set("text","Collapse -")}this.btn.addEvent("click",this.toggle.bind(this))},toggle:function(){if(this.state=="collapsed"){this.show()}else{this.hide()}},show:function(){this.state="expanded";this.content.setStyle("display","block");this.setCookie(this.state);this.btn.set("text","Collapse -")},hide:function(){this.state="collapsed";this.content.setStyle("display","none");this.setCookie(this.state);this.btn.set("text","Expand +")},setCookie:function(a){Cookie.write("landing-pad",a,{duration:30,domain:CNB.getCookieHost(),path:"/"})}});CNB.clickableSkin={load:function(c,b,a){this.elements=$$(c);this.container=$(a);this.content=$(b);if(!$chk(this.elements)||!$chk(this.container)||!$chk(this.content)){return false}this.container.setStyle("position","relative");this.setClickableArea();window.addEvent("resize",this.setClickableArea.bind(this))},setClickableArea:function(){var e=this.container.getScrollSize();var d=this.content.getSize();var c=e.x-d.x;var b=(c>0)?Math.floor(c/2):0;var a=e.y;if(b>0&&a>0){this.elements.each(function(g,f){g.setStyles({position:"absolute","z-index":"1",top:"0",left:0,width:b,height:a});if(f==1){g.setStyles({left:"auto",right:"0"})}})}}};CNB.Overlay.loadEmail=function(b){var c=function(g,f){g.stop();a.loader.add();var d=new Request.JSON({url:f.getProperty("action"),data:f.toJSON(),onSuccess:function(e){if(e.status=="success"){a.notify("Your message has been sent.")}else{a.notify("Sorry we can't send your message at this time.")}},onComplete:a.loader.remove.bind(a.loader),onFailure:function(e){a.notify("Sorry we can't send your message at this time.")}}).post()};var a=new CNB.Overlay.Async(b);a.addOneEvent("contentReady",function(d){var e=new CNB.Validator(d.getElement("form"),{onValidateSuccess:c})});a.open()};CNB.SubscribePromo=new Class({initialize:function(b,a){this.loggedOutForm=$(a);this.loggedInForm=$(b);this.loader=new CNB.Loading(this.loggedInForm);this.loggedOutForm.addEvent("submit",this.loggedOutSubmit.bind(this));this.validate=new CNB.Validator(this.loggedInForm,{onValidateSuccess:CNB.Reg.checkLoggedIn.bindWithEvent(CNB.Reg,this.loggedInSubmit.bind(this))})},loggedOutSubmit:function(a){a.stop();CNB.Reg.join({data:this.loggedOutForm.toJSON()})},loggedInSubmit:function(){this.loader.add();var a=new Request.JSON({url:this.loggedInForm.getProperty("action"),data:$merge(this.loggedInForm.toJSON(),{appId:"243",updateUser:true}),onSuccess:this.subscribeResponse.bind(this),onComplete:this.loader.remove.bind(this.loader),onFailure:function(b){this.subscribeResponse({status:"failure"})}}).post()},subscribeResponse:function(a){switch(a.status){case"success":msg="Thank you for subscribing.";break;default:msg="Sorry, we encountered a problem, and can't process your request at this time."}this.loggedInForm.empty().set("html",'<p class="heavy c-6">'+msg+"</p>")}});CNB.RegOverlay=new Class({initialize:function(){this.isUser=(Cookie.read("purs_3")!=null)?true:false;this.hasViewed=(Cookie.read("reg-overlay")!=null)?true:false},load:function(){if(this.isUser||this.hasViewed){return false}var b=location.pathname;var a=location.hostname;if(b.contains("/members/")){return false}if(!CNB.hasCookiesEnabled()){return false}this.overlay=new CNB.Overlay({id:"reg-pop-overlay",containerClass:"contain-overlay-14",content:this.buildContent(),onClose:function(){DW.redir({ctype:"reg-ol;act",cval:"close"})},onOpen:function(){DW.redir({ctype:"reg-ol;act",cval:"load"});Cookie.write("reg-overlay","1",{duration:30,domain:CNB.getCookieHost(),path:"/"})}}).open()},buildContent:function(){var a='<div class="hed hed-2"><h6 class="h s-7 s-2">Join the largest community of IT leaders on the Web</h6></div>';var c=new Element("div",{html:a});var f='<h4 class="h s-9 heavy">TechRepublic members receive FREE access to:</h4><div class="view-4 pad-1 space-1"><ul class="list-1"><li>10,000+ field-tested how-to&#8217;s from in-the-trenches IT pros</li><li>50,000+ white papers, containing critical decision-support resources for IT managers and CIOs</li><li>1,200+ downloads featuring powerful tools to simplify IT operations</li><li>130,000+ technical Q&A and discussions from a highly engaged community of IT leaders</li></ul><p>More than 20 newsletters, covering a wide-array of IT topics</p></div>';var d=new Element("div",{"class":"content view-2 pad-1_5-a",html:f}).inject(c);var e=new Element("div",{"class":"lvl-btn clear space-1"}).inject(d,"bottom");var b=new Element("a",{"class":"btn btn-1 s-9",text:"Sign Me Up",events:{click:function(){DW.redir({ctype:"reg-ol;act",cval:"signmeup"});this.overlay.remove();CNB.Reg.join({regSrc:"reg-over"})}.bind(this)}}).inject(e,"top");var j=new Element("span",{"class":"other-options right-1 s-11 sink-0_3",html:" &nbsp;|&nbsp; "}).inject(e,"bottom");var g=new Element("a",{text:"No thanks","class":"close",events:{click:function(){this.overlay.removeEvents("close");DW.redir({ctype:"reg-ol;act",cval:"nothanks"})}.bind(this)}}).inject(j,"top");var h=new Element("a",{html:"I&#8217;m already a member",events:{click:function(){DW.redir({ctype:"reg-ol;act",cval:"currentmember"});this.overlay.remove();if(typeof CNB.Reg.logIn!="undefined"){CNB.Reg.logIn({regSource:"reg-over"})}else{CNB.Reg.login({regSrc:"reg-over"})}}.bind(this)}}).inject(j,"bottom");return c}});CNB.Overlay.loadEmail=function(b){var c=function(g,f){g.stop();a.loader.add();var d=new Request.JSON({url:f.getProperty("action"),data:f.toJSON(),onSuccess:function(e){CNB.log(e);if(e.status=="success"){a.notify("Your message has been sent.")}else{a.notify("Sorry we can't send your message at this time.")}},onComplete:a.loader.remove.bind(a.loader),onFailure:function(e){a.notify("Sorry we can't send your message at this time.")}}).post()};var a=new CNB.Overlay.Async(b);a.addOneEvent("contentReady",function(d){var e=new CNB.Validator(d.getElement("form"),{onValidateSuccess:c})});a.open()};CNB.SearchSection=new Class({Implements:Options,options:{defaultSection:""},initialize:function(a,b){this.setOptions(b);this.container=$(a);this.form=this.container.getElement("form");this.overlay=this.container.getElement(".overlay-search");this.sectionOptions=this.overlay.getElements("a")},load:function(){this.sectionOptions.each(function(b){b.addEvent("click",this.handleClick.bindWithEvent(this,b))}.bind(this));var a=new CNB.Pop(this.form,this.overlay,{offset:{x:-5,y:5}}).load();if($chk(this.options.defaultSection)){this.setOnState(this.overlay.getElement("a[section="+this.options.defaultSection+"]"));this.setSection(this.options.defaultSection)}this.form.addEvent("submit",this.handleSubmitEvent.bind(this))},handleClick:function(c,a){c.stop();var b=a.getProperty("section");this.setSection(b);this.setOnState(a)},setOnState:function(a){this.sectionOptions.each(function(b){b.removeClass("on")});a.addClass("on")},setSection:function(b){switch(b){case"reviews":action="http://reviews-search.zdnet.com/search";title="Search Reviews";break;case"downloads":action="http://downloads.zdnet.com/search.aspx";title="Search Downloads";break;case"whitepapers":action="http://whitepapers.zdnet.com/search.aspx";title="Search Whitepapers";break;default:action="http://www.zdnet.com/search";title="Search All"}this.form.setProperty("action",action);var a=this.form.getElement("input");if(a.hasClass("placeholder")){a.set("value",title)}a.setProperty("placeholder",title)},handleSubmitEvent:function(b){b.stop();var a=this.form.getElement("input");a.set("value",a.get("value").toLowerCase());this.form.submit()}});CNB.PopSelect=new Class({Extends:CNB.Pop,options:{setSelectionOnClick:true,setMinWidth:true},initialize:function(c,d,b){this.parent(c,d,b);this.addEvent("open",function(e){if(this.options.setMinWidth){this.setMinWidth()}}.bind(this));var a=this.tabs[0].getStyle("width");this.tabs[0].setStyle("min-width",Math.ceil(a));this.contents[0].getElements("a").each(function(e){e.addEvent("click",this.handleClickEvent.bindWithEvent(this,e));if(e.hasClass("on")){this.setSelection(e)}},this)},handleClickEvent:function(b,a){if(this.options.setSelectionOnClick){this.setSelection(a);if(this.options.setMinWidth){this.setMinWidth()}}},setSelection:function(b){var c=b.getElement(".value");if(!c){c=b}var a=c.get("text");this.tabs[0].getElement(".selection").set("text",a)},setMinWidth:function(){var a=this.tabs[0].getStyle("width");this.contents[0].setStyle("min-width",a)}});CNB.PopSelect.MultiInit=function(b,c,a){b.each(function(f,e){var d=new CNB.PopSelect(f,c[e],a).load()})};CNB.ExcerptContent=new Class({Implements:Options,options:{limit:200,containerElement:"p",textMore:"Read More&nbsp;+",textLess:"Show Less&nbsp;-",suffix:"..."},initialize:function(a,b){this.setOptions(b);this.container=$(a);if(!this.container){return false}this.content=a.get("text").clean();if(this.content.length>this.options.limit){this.build();this.hide()}},build:function(){this.excerptContainer=new Element(this.options.containerElement,{"class":"content-show-more",html:this.getExcerpt(this.content)+" "});this.moreBtn=new Element("a",{"class":"btn-more more",html:this.options.textMore}).addEvent("click",this.show.bind(this)).inject(this.excerptContainer,"bottom");this.lessBtn=new Element("a",{"class":"btn-less more",html:this.options.textLess}).addEvent("click",this.hide.bind(this)).inject(this.container,"bottom");this.excerptContainer.inject(this.container,"before")},getExcerpt:function(b){var a=b.split("");if(a.length>this.options.limit){for(i=a.length-1;i>-1;--i){if(i>this.options.limit){a.length=i}else{if(" "===a[i]){a.length=i;break}}}a.push(this.options.suffix)}return a.join("")},show:function(){this.excerptContainer.setStyle("display","none");this.container.setStyle("display","block")},hide:function(a,b){this.excerptContainer.setStyle("display","block");this.container.setStyle("display","none")}});CNB.CharCounter=new Class({Implements:[Options,Events],options:{max:"6000",updateElementId:"chars-left",limitClass:"limit-chars"},initialize:function(a,b){this.setOptions(b);this.input=$(a);this.checkElement();this.input.addEvent("keydown",function(){this.checkElement()}.bind(this))},checkElement:function(){var b=this.input.get("value").length;var a=this.options.max.toInt()-b;if(b>=this.options.max.toInt()){$(this.options.updateElementId).set("text",0);if(!$(this.options.updateElementId).hasClass(this.options.limitClass)){$(this.options.updateElementId).addClass(this.options.limitClass)}}else{$(this.options.updateElementId).set("text",(a));if($(this.options.updateElementId).hasClass(this.options.limitClass)){$(this.options.updateElementId).removeClass(this.options.limitClass)}if(a<=5){$(this.options.updateElementId).addClass(this.options.limitClass)}}}});CNB.TR.SiteAction=new Class({Implements:[Options,Events],options:{url:"",data:{},regSrc:"site-action"},initialize:function(b,a){this.setOptions(a);this.anchor=$(b);if(!this.anchor){return false}this.data=this.options.data;this.url=this.options.url},makeRequest:function(){if(this.anchor.retrieve("isActive")){return false}this.anchor.store("isActive",true);this.anchor.addClass("loading");var a=new Request.JSON({url:this.url,data:this.data,onSuccess:function(b){if(typeof b=="undefined"||typeof b.status=="undefined"){CNB.log("json data is no good");return false}this.fireEvent(b.status,b)}.bind(this),onComplete:function(){this.fireEvent("complete");this.anchor.store("isActive",false);this.anchor.removeClass("loading")}.bind(this),onFailure:function(b){this.fireEvent("failure")}.bind(this)}).get()},gateRequest:function(){CNB.Reg.gatedEvent(null,this.makeRequest.bind(this),this.options.regSrc,"Please Log In First")}});CNB.TR.Favorite=new Class({Extends:CNB.TR.SiteAction,options:{onSuccess:function(a){if(a.actionType=="remove"){this.anchor.removeClass("is-favorite")}else{this.anchor.addClass("is-favorite")}},onFailure:function(){CNB.log("favorite failure")},regSrc:"favorite"},initialize:function(c,b,a){c.stop();this.parent(b,a);this.url=this.anchor.getProperty("href")},add:function(){this.data.actionType="add";this.gateRequest()},remove:function(){this.data.actionType="remove";this.gateRequest()},toggle:function(){if(this.anchor.hasClass("is-favorite")){this.remove()}else{this.add()}}});CNB.TR.toggleFavorite=function(c,a){var b=new CNB.TR.Favorite(c,a).toggle()};CNB.initCbsSitesPromo=function(a){a=$(a);if(!a){return false}window.rubicsResponse=function(c){a.set("html",c.rubics.response.bodyText).addClass("cbs-sites-promo")};var b=document.createElement("script");b.type="text/javascript";b.src="http://rok.com.com/rok-get?app_handle=netxp1&unit_sp=45&brand=9&wrapper=json";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(b)};window.addEvent("domready",function(){var b=new CNB.RegOverlay().load();var a=$$(".skinClick");if($chk(a)){CNB.clickableSkin.load(a,"content","mantle_skin")}CNB.initCbsSitesPromo("cbs-sites-rubics-promo");$(document.body).addEvent("click:relay(a[siteaction=favorite])",CNB.TR.toggleFavorite)})})();